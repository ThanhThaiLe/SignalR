{"ast":null,"code":"import _asyncToGenerator from \"D:/Github/SignalR/SignalRAngularASP/SignalRAngular/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as signalR from '@microsoft/signalr';\nimport { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport class SignalrService {\n  constructor() {\n    this.hubHelloMessage = new BehaviorSubject('');\n    this.hubUrl = window.location.href + 'MessageHub';\n  }\n  initiateSignalrConnection() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this.connection = new signalR.HubConnectionBuilder().withUrl(_this.hubUrl).withAutomaticReconnect().build();\n        yield _this.connection.start({\n          withCredentials: false\n        });\n        console.log(`SignalR connection success! connectionId: ${_this.connection.connectionId}`);\n      } catch (error) {\n        console.log(`SignalR connection error: ${error}`);\n      }\n    })();\n  }\n}\nSignalrService.ɵfac = function SignalrService_Factory(t) {\n  return new (t || SignalrService)();\n};\nSignalrService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: SignalrService,\n  factory: SignalrService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":";AACA,OAAO,KAAKA,OAAO,MAAM,oBAAoB;AAC7C,SAASC,eAAe,QAAQ,MAAM;;AAKtC,OAAM,MAAOC,cAAc;EAIzBC;IACE,IAAI,CAACC,eAAe,GAAG,IAAIH,eAAe,CAAS,EAAE,CAAC;IACtD,IAAI,CAACI,MAAM,GAAGC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,YAAY;EACnD;EAEaC,yBAAyB;IAAA;IAAA;MACpC,IAAI;QACF,KAAI,CAACC,UAAU,GAAG,IAAIV,OAAO,CAACW,oBAAoB,EAAE,CACjDC,OAAO,CAAC,KAAI,CAACP,MAAM,CAAC,CACpBQ,sBAAsB,EAAE,CACxBC,KAAK,EAAE;QAEV,MAAM,KAAI,CAACJ,UAAU,CAACK,KAAK,CAAC;UAAEC,eAAe,EAAE;QAAK,CAAE,CAAC;QAEvDC,OAAO,CAACC,GAAG,CACT,6CAA6C,KAAI,CAACR,UAAU,CAACS,YAAY,EAAE,CAC5E;OACF,CAAC,OAAOC,KAAK,EAAE;QACdH,OAAO,CAACC,GAAG,CAAC,6BAA6BE,KAAK,EAAE,CAAC;;IAClD;EACH;;AAxBWlB,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;SAAdA,cAAc;EAAAmB,SAAdnB,cAAc;EAAAoB,YAFb;AAAM","names":["signalR","BehaviorSubject","SignalrService","constructor","hubHelloMessage","hubUrl","window","location","href","initiateSignalrConnection","connection","HubConnectionBuilder","withUrl","withAutomaticReconnect","build","start","withCredentials","console","log","connectionId","error","factory","providedIn"],"sourceRoot":"","sources":["D:\\Github\\SignalR\\SignalRAngularASP\\SignalRAngular\\ClientApp\\src\\app\\signalr.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport * as signalR from '@microsoft/signalr';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class SignalrService {\r\n  hubUrl: string;\r\n  connection: any;\r\n  hubHelloMessage: BehaviorSubject<string>;\r\n  constructor() {\r\n    this.hubHelloMessage = new BehaviorSubject<string>('');\r\n    this.hubUrl = window.location.href + 'MessageHub';\r\n  }\r\n\r\n  public async initiateSignalrConnection(): Promise<void> {\r\n    try {\r\n      this.connection = new signalR.HubConnectionBuilder()\r\n        .withUrl(this.hubUrl)\r\n        .withAutomaticReconnect()\r\n        .build();\r\n\r\n      await this.connection.start({ withCredentials: false });\r\n\r\n      console.log(\r\n        `SignalR connection success! connectionId: ${this.connection.connectionId}`\r\n      );\r\n    } catch (error) {\r\n      console.log(`SignalR connection error: ${error}`);\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}